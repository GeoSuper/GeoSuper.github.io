---
author: Rambo
title: 遥感影像预处理之自动配准
date: 2021-11-23
image: 1123.png
categories: 
   - Python
    
---





﻿﻿## 方法一、ArcGIS Pro

利用ArcGIS Pro的自动配准
![在这里插入图片描述](https://img-blog.csdnimg.cn/4b9adb06019843c2b8c18242f023ccaa.jpg#pic_center)
![在这里插入图片描述](https://img-blog.csdnimg.cn/bb3573a45f0a4a8cb192945b28aa4aba.png#pic_center)
查看控制点表可以看到自动打了49个点，还是均匀分布于影像的
![在这里插入图片描述](https://img-blog.csdnimg.cn/264220799b6d4658af4c0dac903925ff.jpg?x-oss-process=image/watermark,type_ZHJvaWRzYW5zZmFsbGJhY2s,shadow_50,text_Q1NETiBAR2VvU3VwZXI=,size_20,color_FFFFFF,t_70,g_se,x_16#pic_center)
局部结果如下图所示，然后另存为新的栅格即可。
![在这里插入图片描述](https://img-blog.csdnimg.cn/c39169c0ed2e4caab7d4ba6502cec038.gif#pic_center)
总结：首先进行自动配准，如果不好的话，可再次进行自动配准，然后打开控制点表格，删除误差比较大的点，边删边看下自动配准的怎么样，基本都能达到满意的结果。

## 方法二、Python(arosics包)
[arosics作者github](https://github.com/GFZ/arosics)
[arosics使用手册](https://danschef.git-pages.gfz-potsdam.de/arosics/doc/)
根据使用手册安装arosics及相关依赖库

纸上得来终觉浅，实践一下：
```python
import arosics
from geoarray import GeoArray
```
加载官方给的样例数据，发现偏移的不是很大，所以自己又手动给目标影像偏移增大了下，命名为*sub1.tif。

![影像局部示意图](https://img-blog.csdnimg.cn/143635cc885a4142816bab1b406858f8.gif#pic_center)
```python
im_reference = "G:/learnpy/arosics/master/ref_S2A_20160608T153121_T33UUU_sub.tif"
im_target = "G:/learnpy/arosics/master/tgt_S2A_20160529T153631_T33UUU_sub1.tif"
```

```python
geoArr = GeoArray(im_reference)
```
查看参考影像的相关参数
```python
ref_ndarray = geoArr[:]
ref_gt = geoArr.geotransform
ref_prj = geoArr.projection
```
查看目标影像的相关参数
```python
tgt_ndarray = geoArr[:]
tgt_gt = geoArr.geotransform
tgt_prj = geoArr.projection
```
```python
geoArr_reference = GeoArray(ref_ndarray, ref_gt, ref_prj)
geoArr_target = GeoArray(tgt_ndarray, tgt_gt, tgt_prj)
```
```python
CR = arosics.CoReg.COREG(geoArr_reference, geoArr_target, wp=(None, None), ws=(256, 256),path_out="C:/Users/Administrator/Desktop/temp/11.tif")
```
计算空间偏移
```python
CR.calculate_spatial_shifts()
```

```python
CR.correct_shifts()
```
看一下最后的配准结果：
<img src="https://img-blog.csdnimg.cn/789c957ef601401f833ac7853a188401.gif#pic_center" alt="在这里插入图片描述" />

欢迎关注个人公众号GeoSuper
![在这里插入图片描述](https://img-blog.csdnimg.cn/2191d59fabf54f1f81588add1ab1231d.gif#pic_left)

